{"version":3,"file":"rut-chileno.umd.js","sources":["ng://rut-chileno/lib/rut.service.ts","ng://rut-chileno/lib/rut.component.ts","ng://rut-chileno/lib/rut.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RutService {\n\n  constructor() { }\n\n  rutFormat(value: string): string {\n    const rut: string = this.rutClean(value);\n    if (rut.length <= 1) {\n      return;\n    }\n\n    let result = `${rut.slice(-4, -1)}-${rut.substr(rut.length - 1)}`;\n    for (let i = 4; i < rut.length; i += 3) {\n      result = `${rut.slice(-3 - i, -i)}.${result}`;\n    }\n\n    return result;\n  }\n\n  rutClean(value: string): string {\n    return typeof value === 'string' ? value.replace(/[^0-9kK]+/g, '').toUpperCase() : '';\n  }\n  \n  validaRUT(rut: string): boolean {\n    let valor: string = rut;\n    valor = this.rutClean(valor);\n  \n    // Aislar Cuerpo y Dígito Verificador\n    const cuerpo = valor.slice(0, -1);\n    let dv = valor.slice(-1).toUpperCase();\n  \n    // Si no cumple con el mínimo ej. (n.nnn.nnn)\n    if (cuerpo.length < 7 && cuerpo.length >= 0) {\n      return true;\n    }\n  \n    // Calcular Dígito Verificador\n    let suma = 0;\n    let multiplo = 2;\n  \n    // Para cada dígito del Cuerpo\n    for (let i = 1; i <= cuerpo.length; i++) {\n      // Obtener su Producto con el Múltiplo Correspondiente\n      const index = multiplo * Number(valor.charAt(cuerpo.length - i));\n  \n      // Sumar al Contador General\n      suma = suma + index;\n  \n      // Consolidar Múltiplo dentro del rango [2,7]\n      if (multiplo < 7) {\n        multiplo = multiplo + 1;\n      } else {\n        multiplo = 2;\n      }\n    }\n  \n    // Calcular Dígito Verificador en base al Módulo 11\n    const dvEsperado = 11 - (suma % 11);\n  \n    // Casos Especiales (0 y K)\n    dv = dv === 'K' ? '10' : dv;\n    dv = dv === '0' ? '11' : dv;\n  \n    // Validar que el Cuerpo coincide con su Dígito Verificador\n    if (dvEsperado.toString() !== dv && cuerpo.length >= 0) {\n      return true;\n    } else {\n      return false;\n    }\n\n  }\n\n  getRutChile(mode: number ,rut: string): string | boolean {\n\n    if(!this.validaRUT(rut)) {\n      switch (mode) {\n        // el rut limpio 184215551\n        case 0:\n          return this.rutClean(rut);\n        // solo el cuerpo del rut  18421555\n        case 1:\n          let valor: string = rut;\n          valor = this.rutClean(valor);\n          let cuerpo = valor.slice(0, -1);\n          return cuerpo;\n        // rut formateado 18.421.555-1\n        case 2:\n          return this.rutFormat(rut);\n        // rut cuerpo - digitov : 18421555-1  \n        case 3:\n            let r: string = rut;\n            r = this.rutClean(r);\n            const c = r.slice(0, -1);\n            let dv = r.slice(-1).toUpperCase();\n            return c + '-'+ dv;\n        case 4:\n          let ru: string = rut;\n          ru = this.rutClean(ru);\n          let div = ru.slice(-1).toUpperCase();\n          return div; \n      }\n    } else {\n      return false;\n    }\n      \n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\n@Component({\n  selector: 'rut-chile',\n  template: `\n  <input type=\"text\"\n  [(ngModel)] = \"rut_chileno\"\n  (focus)=\"rutFormat($event.target.value)\"\n  (keydown)=\"rutFormat($event.target.value)\"\n  (keyup)=\"rutFormat($event.target.value)\"\n  (keypress)=\"validaRUT($event.target.value)\"\n  (blur)=\"validaRUT($event.target.value)\"\n  class=\"input-rut rut\" name=\"username\" id=\"rut_chileno\" placeholder=\"Rut\">\n  <small class=\"danger-rut\" [hidden]=\"!validacionRut\">\n      {{msjE}}\n  </small>\n  `,\n  styles: [\n  ]\n})\nexport class RutComponent implements OnInit {\n\n  @Output() rut_emiter = new EventEmitter<string | number>();\n  @Input() mode: number;\n  @Input() msjError: string;\n\n  validacionRut!: boolean;\n  rut_chileno!: string;\n  msjE!:string;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    if(!this.msjError)\n      this.msjE = \"El rut ingresado no es válido.\";\n    else\n      this.msjE = this.msjError;\n  }\n\n  rutFormat(value: string): void {\n    const rut: string = this.rutClean(value);\n    if (rut.length <= 1) {\n      return;\n    }\n\n    let result = `${rut.slice(-4, -1)}-${rut.substr(rut.length - 1)}`;\n    for (let i = 4; i < rut.length; i += 3) {\n      result = `${rut.slice(-3 - i, -i)}.${result}`;\n    }\n    \n    this.rut_chileno = result;\n  }\n\n  rutClean(value: string): string {\n    return typeof value === 'string' ? value.replace(/[^0-9kK]+/g, '').toUpperCase() : '';\n  }\n  \n  validaRUT(rut: string): void {\n    this.validacionRut = this.validaRUT_(rut);\n    this.sendEmiterRut(this.rut_chileno);\n  }\n\n  validaRUT_(rut: string): boolean {\n    let valor: string = rut;\n    valor = this.rutClean(valor);\n  \n    const cuerpo = valor.slice(0, -1);\n    let dv = valor.slice(-1).toUpperCase();\n  \n    if (cuerpo.length < 7 && cuerpo.length >= 0) {\n      return true;\n    }\n  \n    let suma = 0;\n    let multiplo = 2;\n  \n    for (let i = 1; i <= cuerpo.length; i++) {\n      const index = multiplo * Number(valor.charAt(cuerpo.length - i));\n      suma = suma + index;\n      if (multiplo < 7) {\n        multiplo = multiplo + 1;\n      } else {\n        multiplo = 2;\n      }\n    }\n  \n    const dvEsperado = 11 - (suma % 11);\n    dv = dv === 'K' ? '10' : dv;\n    dv = dv === '0' ? '11' : dv;\n  \n    if (dvEsperado.toString() !== dv && cuerpo.length >= 0)\n      return true;\n    else \n      return false;\n  }\n\n  sendEmiterRut(rut: string): void {\n    if(!this.validacionRut) {\n      switch (this.mode) {\n        case 0:\n          this.rut_emiter.emit(this.rutClean(rut));\n          break;\n        case 1:\n          let valor: string = rut;\n          this.rut_emiter.emit(this.rutClean(valor).slice(0, -1));\n          break;\n        case 2:\n          this.rut_emiter.emit(rut);\n          break;\n        case 3:\n            let r: string = rut;\n            this.rut_emiter.emit(this.rutClean(r).slice(0, -1) + '-'+ r.slice(-1).toUpperCase());\n            break;  \n        case 4:\n          let ru: string = rut;\n          this.rut_emiter.emit(this.rutClean(ru).slice(-1).toUpperCase());\n          break;    \n      }\n    }\n      \n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RutComponent } from './rut.component';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [RutComponent],\n  imports: [\n    FormsModule\n  ],\n  exports: [RutComponent]\n})\nexport class RutModule { }\n"],"names":["Injectable","EventEmitter","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelementEnd","i0.ɵɵtext","i0.ɵɵproperty","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","Component","Output","Input","FormsModule","NgModule"],"mappings":"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"}