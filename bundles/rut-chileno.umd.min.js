!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms")):"function"==typeof define&&define.amd?define("rut-chileno",["exports","@angular/core","@angular/forms"],t):t((e=e||self)["rut-chileno"]={},e.ng.core,e.ng.forms)}(this,(function(e,t,r){"use strict";var n=function(){function e(){}return e.prototype.rutFormat=function(e){var t=this.rutClean(e);if(!(t.length<=1)){for(var r=t.slice(-4,-1)+"-"+t.substr(t.length-1),n=4;n<t.length;n+=3)r=t.slice(-3-n,-n)+"."+r;return r}},e.prototype.rutClean=function(e){return"string"==typeof e?e.replace(/[^0-9kK]+/g,"").toUpperCase():""},e.prototype.validaRUT=function(e){var t=e,r=(t=this.rutClean(t)).slice(0,-1),n=t.slice(-1).toUpperCase();if(r.length<7&&r.length>=0)return!0;for(var i=0,o=2,u=1;u<=r.length;u++){i+=o*Number(t.charAt(r.length-u)),o<7?o+=1:o=2}return n="0"===(n="K"===n?"10":n)?"11":n,(11-i%11).toString()!==n&&r.length>=0},e.prototype.getRutChile=function(e,t){if(this.validaRUT(t))return!1;switch(e){case 0:return this.rutClean(t);case 1:var r=t;return(r=this.rutClean(r)).slice(0,-1);case 2:return this.rutFormat(t);case 3:var n=t;return(n=this.rutClean(n)).slice(0,-1)+"-"+n.slice(-1).toUpperCase();case 4:var i=t;return(i=this.rutClean(i)).slice(-1).toUpperCase()}},e.ɵfac=function(t){return new(t||e)},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),i=function(){function e(){this.rut_emiter=new t.EventEmitter}return e.prototype.ngOnInit=function(){this.msjError?this.msjE=this.msjError:this.msjE="El rut ingresado no es válido."},e.prototype.rutFormat=function(e){var t=this.rutClean(e);if(!(t.length<=1)){for(var r=t.slice(-4,-1)+"-"+t.substr(t.length-1),n=4;n<t.length;n+=3)r=t.slice(-3-n,-n)+"."+r;this.rut_chileno=r}},e.prototype.rutClean=function(e){return"string"==typeof e?e.replace(/[^0-9kK]+/g,"").toUpperCase():""},e.prototype.validaRUT=function(e){this.validacionRut=this.validaRUT_(e),this.sendEmiterRut(this.rut_chileno)},e.prototype.validaRUT_=function(e){var t=e,r=(t=this.rutClean(t)).slice(0,-1),n=t.slice(-1).toUpperCase();if(r.length<7&&r.length>=0)return!0;for(var i=0,o=2,u=1;u<=r.length;u++){i+=o*Number(t.charAt(r.length-u)),o<7?o+=1:o=2}return n="0"===(n="K"===n?"10":n)?"11":n,(11-i%11).toString()!==n&&r.length>=0},e.prototype.sendEmiterRut=function(e){if(!this.validacionRut)switch(this.mode){case 0:this.rut_emiter.emit(this.rutClean(e));break;case 1:var t=e;this.rut_emiter.emit(this.rutClean(t).slice(0,-1));break;case 2:this.rut_emiter.emit(e);break;case 3:var r=e;this.rut_emiter.emit(this.rutClean(r).slice(0,-1)+"-"+r.slice(-1).toUpperCase());break;case 4:var n=e;this.rut_emiter.emit(this.rutClean(n).slice(-1).toUpperCase())}},e.ɵfac=function(t){return new(t||e)},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["rut-chile"]],inputs:{mode:"mode",msjError:"msjError"},outputs:{rut_emiter:"rut_emiter"},decls:3,vars:3,consts:[["type","text","name","username","id","rut_chileno","placeholder","Rut",1,"input-rut","rut",3,"ngModel","ngModelChange","focus","keydown","keyup","keypress","blur"],[1,"danger-rut",3,"hidden"]],template:function(e,r){1&e&&(t.ɵɵelementStart(0,"input",0),t.ɵɵlistener("ngModelChange",(function(e){return r.rut_chileno=e}))("focus",(function(e){return r.rutFormat(e.target.value)}))("keydown",(function(e){return r.rutFormat(e.target.value)}))("keyup",(function(e){return r.rutFormat(e.target.value)}))("keypress",(function(e){return r.validaRUT(e.target.value)}))("blur",(function(e){return r.validaRUT(e.target.value)})),t.ɵɵelementEnd(),t.ɵɵelementStart(1,"small",1),t.ɵɵtext(2),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("ngModel",r.rut_chileno),t.ɵɵadvance(1),t.ɵɵproperty("hidden",!r.validacionRut),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",r.msjE," "))},directives:[r.DefaultValueAccessor,r.NgControlStatus,r.NgModel],encapsulation:2}),e}(),o=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[r.FormsModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(o,{declarations:[i],imports:[r.FormsModule],exports:[i]}),e.RutComponent=i,e.RutModule=o,e.RutService=n,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rut-chileno.umd.min.js.map